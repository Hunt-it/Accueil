<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gargouilles de Notre-Dame</title>

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#000;
      --fg:#fff;
      --accent:#6d6d6d;
    }
    *{box-sizing:border-box;margin:0;padding:0;}
    body{
      font-family:'Poppins',sans-serif;
      background:var(--bg);
      color:var(--fg);
      text-align:center;
      padding:20px;
    }

    h2{margin-bottom:10px;}
    p{margin-bottom:10px;font-size:1em;}

    /* ‚Üí 2 colonnes fixes (donc 5 lignes pour 10 images) */
    .grid{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:12px;
      max-width:600px;      /* largeur adapt√©e √† 2 colonnes sur mobile */
      margin:20px auto;
    }

    .image-tile{
      display:flex;
      flex-direction:column;
      align-items:center;
      background:#f5f5f5;
      border:1px solid #ccc;
      border-radius:8px;
      padding:8px;
      transition:transform .2s;
    }
    .image-tile:hover{transform:scale(1.05);}
    .image-tile img{
      width:100%;
      height:auto;
      max-height:180px;     /* un peu plus grand pour la lisibilit√© */
      border-radius:4px;
    }
    .image-tile input[type="checkbox"]{
      margin-top:5px;
      transform:scale(1.2);
      touch-action:manipulation;
    }

    button {
      display: inline-block;
      padding: 10px 16px;
      background-color: #828282;
      color: white;
      text-decoration: none;
      font-weight: bold;
      font-size: 1em;
      text-align: center;
      white-space: nowrap;
      font-family:'Poppins',sans-serif;
      font-weight:'bold';
    }    

    .controls{margin:20px 0;}
    .controls button{
      margin:0 10px;
      padding:10px 20px;
      font-size:1em;
      border:none;
      border-radius:6px;
      cursor:pointer;
      background:var(--accent);
      color:var(--fg);
      touch-action:manipulation;
      border-radius: 35px;
    }
    .controls button:hover{background:#747474;}

    .feedback{font-size:1.1em;margin-top:10px;}

    #next-button{
      display:none;
      margin-top:20px;
      padding:12px 24px;
      font-size:1em;
      color:var(--fg);
      background:var(--accent);
      border:none;
      border-radius:35px;
      cursor:pointer;
      box-shadow:0 4px 6px rgba(0,0,0,.2);
      transition:background .3s ease;
    }


    @media(max-width:480px){
      body{padding:12px;}
      .image-tile img{max-height:140px;}
      .controls button{margin:4px;padding:8px 12px;font-size:.9em;}
    }


    .image-tile.correct{
    border:4px solid #9acd32;   
    padding:6px;                
}

  </style>
</head>
<body>
  <h2>Ouvrez l'oeil !</h2>
  <p>Cochez les 5 images qui repr√©sentent des √©l√©ments gothiques de l'ext√©rieur de Notre-Dame, attention il y a des pi√®ges !
  </p>

  <div id="image-grid" class="grid"></div>

  <div class="controls">
    <button onclick="verifySelection()">Valider</button>
    <button onclick="revealAnswers()">Solution</button>
    <button onclick="showHint()" id="hint-button" style="display:none;">üí° Indice</button>
  </div>

  <p id="feedback" class="feedback"></p>
  <button id="next-button" onclick="location.href='PG3Dgargouille.html'">Voir le message</button>

  <script>
    /* Images : mettez vos .png dans le m√™me dossier */
    const statues = [
      { src:"nd-coin.png",     isGargoyle:true  },
      { src:"autre1.png",      isGargoyle:false },
      { src:"nd-pointe.png",   isGargoyle:true  },
      { src:"autre2.png",      isGargoyle:false },
      { src:"nd-rosace.png",   isGargoyle:true  },
      { src:"autre3.png",      isGargoyle:false },
      { src:"nd-triangle.png", isGargoyle:true  },
      { src:"autre4.png",      isGargoyle:false },
      { src:"nd-trone.png",    isGargoyle:true  },
      { src:"autre5.png",      isGargoyle:false }
    ].sort(()=>0.5-Math.random());

    let attemptCount = 0;
    const maxAttemptsBeforeHint = 3;

    const grid     = document.getElementById("image-grid"),
          feedback = document.getElementById("feedback"),
          hintBtn  = document.getElementById("hint-button"),
          nextBtn  = document.getElementById("next-button");

    /* G√©n√©ration des 10 mini-fiches */
    statues.forEach((obj, index) => {
      const tile = document.createElement("label");
      tile.className = "image-tile";

      const img = document.createElement("img");
      img.src = obj.src;
      img.alt = "Image "+(index+1);

      const cb  = document.createElement("input");
      cb.type  = "checkbox";
      cb.dataset.index = index;
      cb.setAttribute("aria-label","Choix de l‚Äôimage "+(index+1));

      tile.appendChild(img);
      tile.appendChild(cb);
      grid.appendChild(tile);
    });

    function highlightCorrectTiles(){
      /* applique la classe .correct aux bonnes images */
      document.querySelectorAll(".image-tile").forEach((tile,i)=>{
        if(statues[i].isGargoyle){
          tile.classList.add("correct");
        }
      });
    }


    function verifySelection(){
      const checkboxes = document.querySelectorAll("input[type=checkbox]");
      let success = true;
      attemptCount++;

      checkboxes.forEach((box,i)=>{
        if(box.checked !== statues[i].isGargoyle) success = false;
      });

      if(success){
        feedback.textContent = "Bravo ! Tu as trouv√© tous les bons √©l√©ments ! Une gargouille ouvre la gueule et laisse tomber un nouveau message.";
        feedback.style.color = "#2e7d32";
        highlightCorrectTiles();
        nextBtn.style.display = "inline-block";
      }else{
        feedback.textContent = "Ce n‚Äôest pas tout √† fait √ßa. R√©essaie.";
        feedback.style.color = "#white";
        if(attemptCount >= maxAttemptsBeforeHint){
          hintBtn.style.display = "inline-block";
        }
      }
    }

    function revealAnswers(){
      document.querySelectorAll("input[type=checkbox]").forEach((box,i)=>{
        box.checked  = statues[i].isGargoyle;
        box.disabled = true;
      });
      highlightCorrectTiles();
      feedback.textContent = "Une gargouille ouvre la gueule et laisse tomber un nouveau message.";
      feedback.style.color = "white";
      nextBtn.style.display = "inline-block";
    }

    function showHint(){
      alert("Indice : concentre-toi sur les arcs bris√©s et les grotesques !");
      hintBtn.style.display = "none";
    }
  </script>
</body>
</html>

